{% load i18n %}
{% spaceless %}
<div class="card mb-4 box-shadow border-secondary"> <!-- the good one -->
    <div class="card-header" style="">
        <div class="d-flex justify-content-between align-items-center">
            <small class="text-muted time">{{video.duration_in_time}}</small>
            <span class="text-muted small">
                {% if video.password or video.is_restricted %}
                <span title="{% trans 'This content is password protected.' %}"</span>
                    <svg height="32" class="octicon octicon-lock" viewBox="0 0 12 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z"></path></svg>
                </span>
                {% endif %}

                {% if video.is_draft %}
                <span title="{% trans 'This content is in draft.' %}"</span>
                    <svg height="32" class="octicon octicon-circle-slash" viewBox="0 0 14 16" version="1.1" width="28" aria-hidden="true"><path fill-rule="evenodd" d="M7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm0 1.3c1.3 0 2.5.44 3.47 1.17l-8 8A5.755 5.755 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zm0 11.41c-1.3 0-2.5-.44-3.47-1.17l8-8c.73.97 1.17 2.17 1.17 3.47 0 3.14-2.56 5.7-5.7 5.7z"></path></svg>
                </span>
                {% endif %}
                {% if video.chapter_set.all %}
                <span title="{% trans 'This content is chaptered.' %}">
                    <svg height="32" class="octicon octicon-list-unordered" viewBox="0 0 12 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M2 13c0 .59 0 1-.59 1H.59C0 14 0 13.59 0 13c0-.59 0-1 .59-1h.81c.59 0 .59.41.59 1H2zm2.59-9h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zM1.41 7H.59C0 7 0 7.41 0 8c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0-5H.59C0 2 0 2.41 0 3c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm10 5H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0 5H4.59C4 12 4 12.41 4 13c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01z"></path></svg>
                </span>
                {% endif %}
                {% if video.is_video %}
                <span title="{% trans 'Video content.' %}" >
                    <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-file-binary" aria-hidden="true">
                        <path fill-rule="evenodd" d="M15.2 2.09L10 5.72V3c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V9.28l5.2 3.63c.33.23.8 0 .8-.41v-10c0-.41-.47-.64-.8-.41z"></path>
                    </svg>
                </span>
                {% else %}
                <span title="{% trans 'Audio content.' %}" >
                    <svg height="32" class="octicon octicon-unmute" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M12 7.96c0 1.09-.45 2.09-1.17 2.83l-.67-.67c.55-.56.89-1.31.89-2.16 0-.85-.34-1.61-.89-2.16l.67-.67A3.99 3.99 0 0 1 12 7.96zM7.72 2.22L4 5.94H2c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2l3.72 3.72c.47.47 1.28.14 1.28-.53V2.75c0-.67-.81-1-1.28-.53zm5.94.08l-.67.67a6.996 6.996 0 0 1 2.06 4.98c0 1.94-.78 3.7-2.06 4.98l.67.67A7.973 7.973 0 0 0 16 7.94c0-2.22-.89-4.22-2.34-5.66v.02zm-1.41 1.41l-.69.67a5.05 5.05 0 0 1 1.48 3.58c0 1.39-.56 2.66-1.48 3.56l.69.67A5.97 5.97 0 0 0 14 7.96c0-1.65-.67-3.16-1.75-4.25z"></path></svg>
                </span>
                {% endif %}
            </span>
        </div>
    </div>
    {% if channel %}
    {% if theme %}
    <a href="{% url 'video' slug_c=channel.slug slug_t=theme.slug slug=video.slug %}" title="{{video.title}}">
        {{video.get_thumbnail_card|safe}}
    </a>
    {% else %}
    <a href="{% url 'video' slug_c=channel.slug slug=video.slug %}" title="{{video.title}}">
        {{video.get_thumbnail_card|safe}}
    </a>
    {% endif %}
    {% else %}
    <a href="{{video.get_absolute_url}}" title="{{video.title}}">
        {{video.get_thumbnail_card|safe}}
    </a>
    {% endif %}
    <div class="card-body">
      
      {% if video.owner == request.user or request.user.is_superuser %}
      <footer class="card-footer p-0 m-0">
        {% include "videos/link_video.html" %}
      </footer>
      {% endif %}

      <h6 class="card-subtitle small">
        {% if channel %}
        {% if theme %}
        <a href="{% url 'video' slug_c=channel.slug slug_t=theme.slug slug=video.slug %}" title="{{video.title}}">
            {{video.title}}
        </a>
        {% else %}
        <a href="{% url 'video' slug_c=channel.slug slug=video.slug %}" title="{{video.title}}">
            {{video.title}}
        </a>
        {% endif %}
        {% else %}
        <a href="{{video.get_absolute_url}}" title="{{video.title}}">{{video.title}}</a>
        {% endif %}
      </h6>

    </div>
</div>
{% endspaceless %}