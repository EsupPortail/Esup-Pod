{% load static custom_tags %}
{% get_setting "USE_VIDEO_P2P" False as use_video_p2p %}

{% if use_video_p2p %}
  <script src="{% static '@peertube/p2p-media-loader-core/build/p2p-media-loader-core.js' %}?ver={{VERSION}}" ></script>
  <script src="{% static '@peertube/p2p-media-loader-hlsjs/build/p2p-media-loader-hlsjs.js' %}?ver={{VERSION}}" ></script>
  <script src="{% static 'js/hls-plugin.js' %}?ver={{ VERSION }}" type="module"></script>
{% endif %}

<link href="{% static 'video.js/dist/video-js.min.css' %}?ver={{VERSION}}" rel="stylesheet">
<script id="videojs_script_id" src="{% static 'video.js/dist/video.min.js' %}?ver={{VERSION}}"></script>
{% with 'video.js/dist/lang/'|add:request.LANGUAGE_CODE|add:'.js' as videojs_lang %}
  <script src="{% static videojs_lang %}?ver={{VERSION}}"></script>
{% endwith %}
<!--
<script src="{% static 'js/videojs-hlsjs-plugin.min.js' %}?ver={{VERSION}}"></script>
-->

<script src="{% static 'videojs-quality-selector-hls/dist/videojs-quality-selector-hls.min.js' %}"></script>
<link href="{% static 'videojs-quality-selector-hls/dist/videojs-quality-selector-hls.css' %}?ver={{VERSION}}" rel="stylesheet">

<!-- mp4 quality selector 
  // remove it from videojs 8 due to extend error
  // resolve in https://github.com/silvermine/videojs-quality-selector/commit/d16842b1acb16cb25f12404ce56d8577b1c61a8d
  // wait for new version
<script src="{% static '@silvermine/videojs-quality-selector/dist/js/silvermine-videojs-quality-selector.min.js' %}?ver={{VERSION}}"></script>
-->

{% if not video.is_video and event is None or playlist_in_get %}
  <!-- Audio wavesurfer -->
  <link href="{% static 'videojs-wavesurfer/dist/css/videojs.wavesurfer.min.css' %}?ver={{VERSION}}" rel="stylesheet">
  <script src="{% static 'wavesurfer.js/dist/wavesurfer.min.js'%}?ver={{VERSION}}"></script>
  <script src="{% static 'videojs-wavesurfer/dist/videojs.wavesurfer.min.js' %}?ver={{VERSION}}"></script>

  <style>
    .vjs-wavesurfer>wave>wave {
      /* background-color of previsualised wave */
      background-color: #FFF8;
      /* cursor color */
      border-right-color: var(--pod-primary);
    }
    /* responsive layout when vjs-fluid not present */
    .vjs-wavesurfer>wave {
      top: 0;
      position: absolute !important;
      width: 100%;
      min-width: 100%;
      max-width: 100%;
      /* 3em is for height of controlbar*/
      height: calc(100% - 3em) !important;
      cursor: col-resize !important
    }
    .vjs-wavesurfer>wave>canvas {
      width: 100% !important;
    }
    /* Reduce player height for audio files */
    #podvideoplayer{
      /* nb: video files are set to 56% */
      padding-top: 38%;
    }

  </style>
{% endif %}

<!-- cut video -->
<link rel="stylesheet" href="{% static 'css/video_cut.css' %}?ver={{VERSION}}">

<!-- notes -->
<link href="{% static 'css/video_notes.css' %}?ver={{VERSION}}" rel="stylesheet">
<script src="{% static 'js/video_notes.js' %}?ver={{VERSION}}"></script>
<!-- Playlist / favorites -->
{% if USE_PLAYLIST and USE_FAVORITES %}
  <script src="{% static 'playlist/js/utils-playlist.js' %}?ver={{VERSION}}"></script>
  <script src="{% static 'playlist/js/video-header-favorites.js' %}?ver={{VERSION}}"></script>
{% endif %}
<!-- logo -->
<link href="{% static 'css/videojs-controlbar.css' %}?ver={{VERSION}}" rel="stylesheet">
<script src="{% static 'js/videojs-logo-controlbar.js' %}?ver={{VERSION}}"></script>

{% if video.overview or playlist_in_get %}
  <link id="overview_style_id" href="{% static 'videojs-vtt-thumbnails/dist/videojs-vtt-thumbnails.css' %}?ver={{VERSION}}" rel="stylesheet">
  <script id="overview_script_id" src="{% static 'videojs-vtt-thumbnails/dist/videojs-vtt-thumbnails.min.js' %}?ver={{VERSION}}"></script>
{% endif %}

{% if video.overlay_set.all and not enrichment or playlist_in_get %}
  <link id="overlay_style_id" href="{% static 'videojs-overlay/dist/videojs-overlay.css' %}?ver={{VERSION}}" rel="stylesheet">
  <script id="overlay_script_id" src="{% static 'videojs-overlay/dist/videojs-overlay.min.js' %}?ver={{VERSION}}"></script>
{% endif %}

{% if request.user.playlist_set.all %}
  <link href="{% static 'playlist/css/playlist.css' %}?ver={{VERSION}}" rel="stylesheet">
{% endif %}

{% if video.is_360 or playlist_in_get %}
  <link id="vr360_style_id" href="{% static 'videojs-vr/dist/videojs-vr.css' %}?ver={{VERSION}}" rel="stylesheet">
  <script id="vr360_script_id" src="{% static 'videojs-vr/dist/videojs-vr.min.js' %}?ver={{VERSION}}"></script>
{% endif %}
