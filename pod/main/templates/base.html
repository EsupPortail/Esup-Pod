{% load staticfiles %}
{% load i18n %}
<!doctype html>
<html lang="fr">
	<head>
	    <!-- Required meta tags -->
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <meta name="description" content="">
	    <meta name="author" content="">

	    <link rel="icon" href="{% static 'images/favicon.png' %}">

	    <!-- Bootstrap CSS -->
	    <link rel="stylesheet" href="{% static 'bootstrap-4/css/bootstrap.min.css' %}" crossorigin="anonymous">

	    <!-- octicons -->
	    <link rel="stylesheet" href="{% static 'css/octicons.css' %}" media="screen" title="no title">
	    <link rel="stylesheet" href="{% static 'css/lillePod.css' %}" media="screen" title="no title">
        <style>
            .jumbotron {
                padding: 1rem 2rem;
            }
            .infinite-item .card-body {
                padding: 1.1rem;
                height: 3.5rem;
                overflow: hidden;
            }
            .infinite-item .card-header .octicon {
                height:0.9rem;
                margin:0.1rem;
            }
            /** Vignette video **/
            div.card a{
             overflow:hidden;
            }
            div.card a img {
             transition:-webkit-transform .5s ease;
             transition:transform .5s ease;
             transition:transform .5s ease, -webkit-transform .5s ease
            }
            div.card a:hover>img {
             -webkit-transform:scale(1.1);
             transform:scale(1.1)
             z-index:0;
            }
            .card-footer {
                position: absolute;
                bottom: 0;
                right: 0;
                border:none;
            }
            .card-footer a{
                /*color: #ddd;*/
            }
            .card-footer .octicon{
                height: 1rem;
            }
            /** aside list video **/
            #filterType div.collapse:not(.show), #filterDiscipline div.collapse:not(.show), #filterTag div.collapse:not(.show) {
                height: 148px !important;
                overflow: hidden;
                
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;  
            }

            #filterType div.collapsing, #filterDiscipline div.collapsing, #filterTag  div.collapsing{
                min-height: 148px !important;
            }

            #filterType a.collapsed:after, #filterDiscipline a.collapsed:after, #filterTag a.collapsed:after {
                content: '+';
            }

            #filterType a:not(.collapsed):after, #filterDiscipline a:not(.collapsed):after, #filterTag  a:not(.collapsed):after {
                content: '-';
            }
            /** ckeditor **/
            .django-ckeditor-widget {
                width: 100%;
            }
            /** video form **/
            .required { color:red;}
            .form-group-required {
                border-left: 3px solid rgba(201, 76, 76, 0.3);
                padding-left : 5px;
            }
            .form-group-required .errors {
                background-color: rgba(201, 76, 76, 0.3);
            }
            #base-message-alert, #formalertdiv{
                position:fixed;
                top:50%;
                text-align: center;
                margin:0 auto;
                left: 50%;
                transform: translate(-50%, 0);
            }

        </style>
	    <title>{{ TITLE_SITE }} - {% block page_title %}{% endblock %}</title>

	    {% block page_extra_head %}{% endblock %}
	</head>
	<body>
		<!-- barre nav-->
		<nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
		{% include 'navbar.html' %}
		</nav><!-- fin barre nav-->
		{% include 'navbar_collapse.html' %}
		{% block content %}
		<div class="container">
			<main role="main" class="mt-3">
		        <nav aria-label="breadcrumb" class="breadcrumb d-flex justify-content-between p-0">
		          <ol class="breadcrumb p-1 pl-4 mb-0">
		          	{% block breadcrumbs %}
		                <li class="breadcrumb-item"><a href="/">{% trans 'Home' %}</a></li>
					{% endblock breadcrumbs %}
					<!--
		            <li class="breadcrumb-item"><a href="#">Accueil</a></li>
		            <li class="breadcrumb-item"><a href="#">Vidéos</a></li>
		            <li class="breadcrumb-item active" aria-current="page">Visionner une vidéo</li>
		        	-->
		          </ol>
		          <div class="p-0">
                    {% block collapse_page_aside %}
		            <a class="btn btn-primary btn-sm" data-toggle="collapse" href="#collapseAside" role="button" aria-expanded="false" aria-controls="collapseAside" >
		              <span data-toggle="tooltip" data-placement="top" title="{% trans "Open/Close the aside" %}><svg height="32" class="octicon octicon-grabber" viewBox="0 0 8 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 4v1H0V4h8zM0 8h8V7H0v1zm0 3h8v-1H0v1z"></path></svg></span>
		            </a>
                    {% endblock collapse_page_aside %}
		          </div>
		        </nav>
		        <div class="row">
		        	<div class="col order-12 order-md-1">
						<!-- contenu page statique -->
						<div class="jumbotron">
							{% block page_content %}
								<p> Contenu block page_content </p>
							{% endblock page_content %}
						</div>
						<!-- fin contenu page statique -->
						{% include "videos/last_videos.html" %}
		        	</div> <!-- fin col order-12 order-md-1 -->
		        	<aside class="collapse col-12 col-md-3 order-1 order-md-12 mb-3" id="collapseAside">
                        {% block page_aside %}
					       {% include 'aside.html'%}
                        {% endblock page_aside %}
					</aside>
		        </div> <!-- fin row -->
		    </main>
		</div> <!-- fin container -->
		{% endblock content %}
		<footer class="text-muted bg-dark pt-2">
		{% include 'footer.html' %}
		</footer>
        
        {% if messages %}
        <div id="base-message-alert">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        {% endfor %}
        </div>
        {% endif %}
        <!-- JS -->
        <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
        <script src="{% static 'bootstrap-4/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/js.cookie.js' %}"></script>

		<script>
		var listUser = {{LISTOWNER|safe}};

		$('#ownerboxnavbar').keyup(function() {
			if($(this).val() && $(this).val().length > 2) {
				var valThis = $(this).val().toLowerCase();
				var letter = valThis.charAt(0);
				var nbuser = listUser[letter].length;
				$("#accordion").html("");
				for(i=0; i<nbuser; i++) {
					var lastname = listUser[letter][i]["last_name"].toLowerCase();
					if(lastname.indexOf(valThis) != -1) $("#accordion").append('<li><a href="{% url 'videos' %}?owner='+listUser[letter][i]["username"]+'" title="">'+listUser[letter][i]["first_name"]+' '+listUser[letter][i]["last_name"]+' ('+listUser[letter][i]["username"]+')</a></li>');
				}
			} else {
				$("#accordion").html("");
			}
		});
		$(".showUser").on('click', function() {
			var letter = $(this).attr("data-target").toLowerCase();
			var nbuser = listUser[letter].length;
			$("#accordion").html("");
			for(i=0; i<nbuser; i++) {
				$("#accordion").append('<li><a href="{% url 'videos' %}?owner='+listUser[letter][i]["username"]+'" title="">'+listUser[letter][i]["first_name"]+' '+listUser[letter][i]["last_name"]+' ('+listUser[letter][i]["username"]+')</a></li>');
			}
		})

        $(document).ready(function () {
            //when a group is shown, save it as the active accordion group
            $("#collapseAside").on('shown.bs.collapse', function () {
                Cookies.set('activeCollapseAside', "open");
                //alert("Cookie");
            });
            $("#collapseAside").on('hidden.bs.collapse', function () {
                Cookies.remove('activeCollapseAside');
            });
            var last = Cookies.get('activeCollapseAside');
            if (last != null) {
                //show the account_last visible group
                $("#collapseAside").addClass("show");
            } /*else {
                $("#collapseAside").removeClass("show");
            }*/
        });

		</script>

		{% block more_script %}
		{% endblock more_script %}

	</body>
</html>