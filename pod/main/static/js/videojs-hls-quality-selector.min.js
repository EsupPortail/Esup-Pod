/**
 * videojs-hls-quality-selector
 * @version 0.0.4
 * @copyright 2018 Chris Boustead (chris@forgemotion.com)
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):t.videojsHlsQualitySelector=e(t.videojs)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;!function(){function t(t){this.value=t}function e(e){function n(i,r){try{var u=e[i](r),l=u.value;l instanceof t?Promise.resolve(l.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(u.done?"return":"normal",u.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(t,e){return new Promise(function(o,u){var l={key:t,arg:e,resolve:o,reject:u,next:null};r?r=r.next=l:(i=r=l,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},i={},r=t.registerPlugin||t.plugin,u=function(){function i(t,n){e(this,i),this.player=t,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return i.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},i.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},i.prototype.createQualityButton=function(){var i=this.player,r=function(t){function r(){return e(this,r),o(this,t.call(this,i,{title:i.localize("Quality")}))}return n(r,t),r.prototype.createItems=function(){return[]},r}(t.getComponent("MenuButton"));this._qualityButton=new r;var u=i.controlBar.children().length-2,l=i.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},u);l.addClass("vjs-quality-selector"),l.menuButton_.$(".vjs-icon-placeholder").className+=" vjs-icon-hd",l.removeClass("vjs-hidden")},i.prototype.getQualityMenuItem=function(i){var r=this.player;return new(function(t){function r(n,u,l,s){e(this,r);var a=o(this,t.call(this,n,{label:i.label,selectable:!0,selected:i.selected||!1}));return a.item=u,a.qualityButton=l,a.plugin=s,a}return n(r,t),r.prototype.handleClick=function(){for(var t=0;t<this.qualityButton.items.length;++t)this.qualityButton.items[t].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},r}(t.getComponent("MenuItem")))(r,i,this._qualityButton,this)},i.prototype.onAddQualityLevel=function(){for(var t=this.player.qualityLevels().levels_||[],e=[],n=0;n<t.length;++n){var o=this.getQualityMenuItem.call(this,{label:t[n].height+"p",value:t[n].height});e.push(o)}e.push(this.getQualityMenuItem.call(this,{label:"Auto",value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return e},this._qualityButton.update())},i.prototype.setQuality=function(t){for(var e=this.player.qualityLevels(),n=0;n<e.length;++n){var o=e[n];o.enabled=o.height===t||"auto"===t}this._qualityButton.unpressButton()},i}(),l=function(e){var n=this;this.ready(function(){!function(t,e){t.addClass("vjs-hls-quality-selector"),t.hlsQualitySelector=new u(t,e)}(n,t.mergeOptions(i,e))})};return r("hlsQualitySelector",l),l.VERSION="0.0.4",l});