from django.contrib import admin
from django.template.response import TemplateResponse
from django.conf.urls import url
from .models import Custom, ManageVideoOwner
from .views import update_owner
from django.contrib.admin import AdminSite

#class ManageVideoOwnerAdmin(admin.ModelAdmin):
#    def changelist_view(self, request, extra_context=None):
#        extra_context = extra_context or {}
#        extra_context['data'] = {}
#        return super(ManageVideoOwnerAdmin, self).changelist_view(
#                request, extra_context=extra_context)

 #   def get_urls(self):
  #      print("--------------  *************************    -------------------")
   #     urls = super(ManageVideoOwnerAdmin, self).get_urls()
    #    urls += [
     #           url(
      #              r'test/$',
       #             self.admin_site.admin_view(update_owner) ),
        #        ]
        #print(urls)
        #return urls


class MyAdminSite(AdminSite):
    
    def get_urls(self):
        urls = super(MyAdminSite, self).get_urls()
        urls += [
                url(r'^managevideoowner/$', self.admin_view(update_owner))
                ]
        return urls
admin.site = MyAdminSite()

@admin.register(ManageVideoOwner, site=admin.site)
class ManageVideoOwnerAdmin(admin.ModelAdmin):
    change_list_template = "admin/custom/admin/change_video_owner.html"



#    admin_urls = self.get_urls(admin.site.get_urls())
# admin_site = ManageVideoOwnerAdmin()
# admin.site.register(Custom, CustomAdmin)
#admin.site.register(ManageVideoOwner, ManageVideoOwnerAdmin)
